<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="In recent R versions the parser can attach source code location
information to the parsed expressions. This information is often
useful for static analysis, e.g. code linting. It can be accessed
via the utils::getParseData() function."><title>Convert R parse data to XML — xml_parse_data • xmlparsedata</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.8/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.8/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Convert R parse data to XML — xml_parse_data"><meta property="og:description" content="In recent R versions the parser can attach source code location
information to the parsed expressions. This information is often
useful for static analysis, e.g. code linting. It can be accessed
via the utils::getParseData() function."><meta name="robots" content="noindex"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><script defer data-domain="r-lib.github.io/xmlparsedata,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-none"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">xmlparsedata</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.0.5.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/xmlparsedata/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Convert R parse data to XML</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/xmlparsedata/blob/HEAD/R/package.R" class="external-link"><code>R/package.R</code></a></small>
      <div class="d-none name"><code>xml_parse_data.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>In recent R versions the parser can attach source code location
information to the parsed expressions. This information is often
useful for static analysis, e.g. code linting. It can be accessed
via the <code><a href="https://rdrr.io/r/utils/getParseData.html" class="external-link">utils::getParseData()</a></code> function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">xml_parse_data</span><span class="op">(</span><span class="va">x</span>, includeText <span class="op">=</span> <span class="cn">NA</span>, pretty <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>an expression returned from <code><a href="https://rdrr.io/r/base/parse.html" class="external-link">parse</a></code>, or a function or other
    object with source reference information</p></dd>


<dt>includeText</dt>
<dd><p>logical; whether to include the text of parsed items in the result</p></dd>


<dt>pretty</dt>
<dd><p>Whether to pretty-indent the XML output. It has a small
overhead which probably only matters for very large source files.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An XML string representing the parse data. See details below.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>xml_parse_data()</code> converts this information to an XML tree.
The R parser's token names are preserved in the XML as much as
possible, but some of them are not valid XML tag names, so they are
renamed, see the <a href="xml_parse_token_map.html">xml_parse_token_map</a> vector for the
mapping.</p>
<p>The top XML tag is <code>&lt;exprlist&gt;</code>, which is a list of
expressions, each expression is an <code>&lt;expr&gt;</code> tag. Each tag
has attributes that define the location: <code>line1</code>, <code>col1</code>,
<code>line2</code>, <code>col2</code>. These are from the <code><a href="https://rdrr.io/r/utils/getParseData.html" class="external-link">getParseData()</a></code>
data frame column names. Next, there are two attributes,
<code>start</code> and <code>end</code>, which can be used as an ordering of
expressions in the document. Note that while the values
are correlated with (and in some cases may match exactly)
positions in the document, this cannot be relied upon.</p>
<p>See an example below. See also the README at
<a href="https://github.com/r-lib/xmlparsedata#readme" class="external-link">https://github.com/r-lib/xmlparsedata#readme</a>
for examples on how to search the XML tree with the <code>xml2</code> package
and XPath expressions.</p>
<p>Note that <code>xml_parse_data()</code> silently drops all control characters
(0x01-0x1f) from the input, except horizontal tab (0x09) and newline
(0x0a), because they are invalid in XML 1.0.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="xml_parse_token_map.html">xml_parse_token_map</a> for the token names.
<a href="https://github.com/r-lib/xmlparsedata#readme" class="external-link">https://github.com/r-lib/xmlparsedata#readme</a> for more
information and use cases.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">code</span> <span class="op">&lt;-</span> <span class="st">"function(a = 1, b = 2) {\n  a + b\n}\n"</span></span></span>
<span class="r-in"><span><span class="va">expr</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/parse.html" class="external-link">parse</a></span><span class="op">(</span>text <span class="op">=</span> <span class="va">code</span>, keep.source <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># The base R way:</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/getParseData.html" class="external-link">getParseData</a></span><span class="op">(</span><span class="va">expr</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    line1 col1 line2 col2 id parent          token terminal     text</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33     1    1     3    1 33      0           expr    FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1    1     1    8  1     33       FUNCTION     TRUE function</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1    9     1    9  2     33            '('     TRUE        (</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      1   10     1   10  3     33 SYMBOL_FORMALS     TRUE        a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      1   12     1   12  4     33     EQ_FORMALS     TRUE        =</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      1   14     1   14  5      6      NUM_CONST     TRUE        1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      1   14     1   14  6     33           expr    FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      1   15     1   15  7     33            ','     TRUE        ,</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     1   17     1   17 10     33 SYMBOL_FORMALS     TRUE        b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11     1   19     1   19 11     33     EQ_FORMALS     TRUE        =</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12     1   21     1   21 12     13      NUM_CONST     TRUE        2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13     1   21     1   21 13     33           expr    FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14     1   22     1   22 14     33            ')'     TRUE        )</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30     1   24     3    1 30     33           expr    FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17     1   24     1   24 17     30            '{'     TRUE        {</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25     2    3     2    7 25     30           expr    FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19     2    3     2    3 19     21         SYMBOL     TRUE        a</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21     2    3     2    3 21     25           expr    FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     2    5     2    5 20     25            '+'     TRUE        +</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22     2    7     2    7 22     24         SYMBOL     TRUE        b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24     2    7     2    7 24     25           expr    FALSE         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28     3    1     3    1 28     30            '}'     TRUE        }</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="fu">xml_parse_data</span><span class="op">(</span><span class="va">expr</span>, pretty <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;?xml version="1.0" encoding="UTF-8" standalone="yes" ?&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;exprlist&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   &lt;expr line1="1" col1="1" line2="3" col2="1" start="26" end="76"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;FUNCTION line1="1" col1="1" line2="1" col2="8" start="26" end="33"&gt;function&lt;/FUNCTION&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;OP-LEFT-PAREN line1="1" col1="9" line2="1" col2="9" start="34" end="34"&gt;(&lt;/OP-LEFT-PAREN&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;SYMBOL_FORMALS line1="1" col1="10" line2="1" col2="10" start="35" end="35"&gt;a&lt;/SYMBOL_FORMALS&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;EQ_FORMALS line1="1" col1="12" line2="1" col2="12" start="37" end="37"&gt;=&lt;/EQ_FORMALS&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;expr line1="1" col1="14" line2="1" col2="14" start="39" end="39"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;NUM_CONST line1="1" col1="14" line2="1" col2="14" start="39" end="39"&gt;1&lt;/NUM_CONST&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;/expr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;OP-COMMA line1="1" col1="15" line2="1" col2="15" start="40" end="40"&gt;,&lt;/OP-COMMA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;SYMBOL_FORMALS line1="1" col1="17" line2="1" col2="17" start="42" end="42"&gt;b&lt;/SYMBOL_FORMALS&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;EQ_FORMALS line1="1" col1="19" line2="1" col2="19" start="44" end="44"&gt;=&lt;/EQ_FORMALS&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;expr line1="1" col1="21" line2="1" col2="21" start="46" end="46"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;NUM_CONST line1="1" col1="21" line2="1" col2="21" start="46" end="46"&gt;2&lt;/NUM_CONST&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;/expr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;OP-RIGHT-PAREN line1="1" col1="22" line2="1" col2="22" start="47" end="47"&gt;)&lt;/OP-RIGHT-PAREN&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;expr line1="1" col1="24" line2="3" col2="1" start="49" end="76"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;OP-LEFT-BRACE line1="1" col1="24" line2="1" col2="24" start="49" end="49"&gt;{&lt;/OP-LEFT-BRACE&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;expr line1="2" col1="3" line2="2" col2="7" start="53" end="57"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;expr line1="2" col1="3" line2="2" col2="3" start="53" end="53"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;SYMBOL line1="2" col1="3" line2="2" col2="3" start="53" end="53"&gt;a&lt;/SYMBOL&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;/expr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;OP-PLUS line1="2" col1="5" line2="2" col2="5" start="55" end="55"&gt;+&lt;/OP-PLUS&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;expr line1="2" col1="7" line2="2" col2="7" start="57" end="57"&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;SYMBOL line1="2" col1="7" line2="2" col2="7" start="57" end="57"&gt;b&lt;/SYMBOL&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;/expr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;/expr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       &lt;OP-RIGHT-BRACE line1="3" col1="1" line2="3" col2="1" start="76" end="76"&gt;}&lt;/OP-RIGHT-BRACE&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     &lt;/expr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   &lt;/expr&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;/exprlist&gt;</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" style="margin-bottom: 3px;"></a>, Mango Solutions.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

  </div></footer></body></html>

